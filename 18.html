<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lock 18 of 20</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .footnote {
      position: absolute;
      bottom: 5px;
    }
  /* overlay styles */
    #aboutOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.4s ease;
      z-index: 9999;
    }
    #aboutOverlay.show {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
    }
    .aboutContent {
      background: white;
      padding: 2rem;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      width: 90%;
      position: relative;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      transform: translateY(10px);
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }
    #aboutOverlay.show .aboutContent {
      transform: translateY(0);
      opacity: 1;
    }
    .closeBtn {
      position: absolute;
      top: 0.5rem;
      right: 0.75rem;
      font-size: 1.6rem;
      border: none;
      background: none;
      cursor: pointer;
      color: black;
      -webkit-appearance: none;
      appearance: none;
    }
  </style>
</head>

<body>
  <main>
    <table id="18">
      <tr>
        <th class="number">/<br>1<br>8<br>/</th>
        <th class="title"><i>The Sinew Will Remain<br>(fragments taken from book<sup>1</sup>),<br>Saturday, November 8, 2025</i></th>
        <th class="about">
          <a href="#" class="openAbout">A<br>B<br>O<br>U<br>T</a>
        </th>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>After seeing a show by Ming Fay.</td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>(Visitors come and go. Come and go. Photograph and go.)</td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>I am waiting for a friend.</td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td class="shorter">(These seams still hold space for the once full skin now withered, shrunken. It is a gentle
          inference that something was there that is no longer. This seam is full because this skin was full.)</td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>I photograph each page with my phone, so as not to forget. I type out each line later, letter by letter.</td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
      <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <th class="footnote"><i><sup>1</sup>Katherine Hubbard, “a slight cast down at the edges of the lips”</i></th>
      </tr>
    </table>
  
  <!-- Overlay must be INSIDE the body -->
    <div id="aboutOverlay" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="aboutContent" role="document">
        <button class="closeBtn" aria-label="Close">✕</button>
        <div id="aboutInner" aria-live="polite"></div>
      </div>
    </div>
</main>

  <script>
    // Grab elements AFTER they exist in the DOM
    const aboutOverlay = document.getElementById("aboutOverlay");
    const aboutInner = document.getElementById("aboutInner");
    const closeBtn = document.querySelector('.closeBtn');

    // Attach handler to ALL .openAbout links (works if there are many)
    document.querySelectorAll('.openAbout').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        openAbout();
      });
    });

    function openAbout() {
      // lock scrolling on background
      document.body.style.overflow = 'hidden';
      aboutOverlay.classList.add("show");
      aboutOverlay.setAttribute('aria-hidden', 'false');

      // Only fetch once; aboutInner.dataset.loaded used as cache flag
      if (!aboutInner.dataset.loaded) {
        // NOTE: when testing locally, run a local server so fetch() can succeed.
        fetch("about.html")
          .then(res => {
            if (!res.ok) throw new Error('Network response not ok');
            return res.text();
          })
          .then(html => {
            aboutInner.innerHTML = html;
            aboutInner.dataset.loaded = "true";
          })
          .catch(err => {
            console.error('Error loading about.html:', err);
            aboutInner.innerHTML = "<p>Error loading About page.</p>";
          });
      }
    }

    function closeAbout() {
      aboutOverlay.classList.remove("show");
      aboutOverlay.setAttribute('aria-hidden', 'true');
      // restore scroll
      document.body.style.overflow = '';
    }

    // Close handlers
    closeBtn.addEventListener('click', closeAbout);
    aboutOverlay.addEventListener('click', (e) => {
      if (e.target === aboutOverlay) closeAbout();
    });

    // keyboard: Escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && aboutOverlay.classList.contains('show')) {
        closeAbout();
      }
    });
  </script>
</body>
</html>
