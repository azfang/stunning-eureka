<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lock 19 of 20</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* overlay styles */
    #aboutOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.4s ease;
      z-index: 9999;
    }
    #aboutOverlay.show {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
    }
    .aboutContent {
      background: white;
      padding: 2rem;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      width: 90%;
      position: relative;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      transform: translateY(10px);
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }
    #aboutOverlay.show .aboutContent {
      transform: translateY(0);
      opacity: 1;
    }
    .closeBtn {
      position: absolute;
      top: 0.5rem;
      right: 0.75rem;
      font-size: 1.6rem;
      border: none;
      background: none;
      cursor: pointer;
      color: black;
      -webkit-appearance: none;
      appearance: none;
    }
  </style>
</head>

<body>
  <main>
    <table id="19">
      <tr>
        <th class="number">/<br>1<br>9<br>/</th>
        <th class="title"><i>CLOT (Manhattan, New York)<br>Saturday, November 29, 2025</i></th>
        <th class="about">
          <a href="#" class="openAbout">A<br>B<br>O<br>U<br>T</a>
        </th>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>Short for CLOTHING INDUSTRY.</td>
      </tr>
      <tr>
        <td></td>
        <td>Defined as: a thick mass of coagulated liquid, especially blood, or of material stuck together. A portion of
          a substance. Adhering together in a thick nondescript mass.</td>
      </tr>
      <tr>
        <td></td>
        <td>00005-scan_2025-11-29_14-53-52</td>
      </tr>
      <tr>
        <td></td>
        <td class="shorter">ABOVE: Dozens of people labored together at long tables in the open left spaces that
          characterized the Garment District of New York City in 1905.</td>
      </tr>
      <tr>
        <td></td>
        <td>(At some point, I’ve begun to notice duplicates within the collection.) There are three of the same photo:
        </td>
      </tr>
      <tr>
        <td></td>
        <td>20TH CENTURY - INDUSTRIES</td>
      </tr>
      <tr>
        <td></td>
        <td>GARMENT</td>
      </tr>
      <tr>
        <td></td>
        <td>ACCESSION NO. Byron</td>
      </tr>
      <tr>
        <td></td>
        <td>TITLE</td>
      </tr>
      <tr>
        <td></td>
        <td>Interior, Moe Levy & Co. clothing factory,</td>
      </tr>
      <tr>
        <td></td>
        <td>c. 1912</td>
      </tr>
      <tr>
        <td></td>
        <td>00002-scan_2025-11-29_15-38-12</td>
      </tr>
      <tr>
        <td></td>
        <td>#22,114 (c. 1990)</td>
      </tr>
      <tr>
        <td></td>
        <td>In a men’s shirt factory in Las Piedras</td>
      </tr>
      <tr>
        <td></td>
        <td>En una fabrica de camisas en Las Piedras</td>
      </tr>
      <tr>
        <td></td>
        <td>The library itself is full of fragments. A single folder of newspaper clippings: pages that were ripped out, cut out, needed to be pieced together.</td>
      </tr>      
    </table>
  
  <!-- Overlay must be INSIDE the body -->
    <div id="aboutOverlay" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="aboutContent" role="document">
        <button class="closeBtn" aria-label="Close">✕</button>
        <div id="aboutInner" aria-live="polite"></div>
      </div>
    </div>
</main>

  <script>
    // Grab elements AFTER they exist in the DOM
    const aboutOverlay = document.getElementById("aboutOverlay");
    const aboutInner = document.getElementById("aboutInner");
    const closeBtn = document.querySelector('.closeBtn');

    // Attach handler to ALL .openAbout links (works if there are many)
    document.querySelectorAll('.openAbout').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        openAbout();
      });
    });

    function openAbout() {
      // lock scrolling on background
      document.body.style.overflow = 'hidden';
      aboutOverlay.classList.add("show");
      aboutOverlay.setAttribute('aria-hidden', 'false');

      // Only fetch once; aboutInner.dataset.loaded used as cache flag
      if (!aboutInner.dataset.loaded) {
        // NOTE: when testing locally, run a local server so fetch() can succeed.
        fetch("about.html")
          .then(res => {
            if (!res.ok) throw new Error('Network response not ok');
            return res.text();
          })
          .then(html => {
            aboutInner.innerHTML = html;
            aboutInner.dataset.loaded = "true";
          })
          .catch(err => {
            console.error('Error loading about.html:', err);
            aboutInner.innerHTML = "<p>Error loading About page.</p>";
          });
      }
    }

    function closeAbout() {
      aboutOverlay.classList.remove("show");
      aboutOverlay.setAttribute('aria-hidden', 'true');
      // restore scroll
      document.body.style.overflow = '';
    }

    // Close handlers
    closeBtn.addEventListener('click', closeAbout);
    aboutOverlay.addEventListener('click', (e) => {
      if (e.target === aboutOverlay) closeAbout();
    });

    // keyboard: Escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && aboutOverlay.classList.contains('show')) {
        closeAbout();
      }
    });
  </script>
</body>
</html>
