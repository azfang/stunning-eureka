<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lock 3 of 20</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .title {
      font-family: "Times New Roman", serif;
      font-size: 14px;
    }
    /* overlay styles */
    #aboutOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.4s ease;
      z-index: 9999;
    }
    #aboutOverlay.show {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
    }
    .aboutContent {
      background: white;
      padding: 2rem;
      max-width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      width: 90%;
      position: relative;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      transform: translateY(10px);
      opacity: 0;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }
    #aboutOverlay.show .aboutContent {
      transform: translateY(0);
      opacity: 1;
    }
    .closeBtn {
      position: absolute;
      top: 0.5rem;
      right: 0.75rem;
      font-size: 1.6rem;
      border: none;
      background: none;
      cursor: pointer;
      color: black;
      -webkit-appearance: none;
      appearance: none;
    }
  </style>
  </style>
</head>

<body>
  <main>
    <table id="3">
      <tr>
        <th class="number">/<br>0<br>3<br>/</th>
        <th class="title"><i>Absolutely (Manhattan, New York),<br>Thursday, April 18, 2024</i></th>
        <th class="about">
          <a href="#" class="openAbout">A<br>B<br>O<br>U<br>T</a>
        </th>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>Carter had sat across from me for two years, when I was still working for the fashion magazine. I rarely saw much of him—a left ear, maybe, a glimpse of his shoulder. Our desks blocked our views of each other.</td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>We published his obituary online. I’d just turned 25. He was 41. There was no mention of how they found him in his apartment in Brooklyn, just a few streets down from where I lived at the time. We drank at the Margaritaville in Times Square that night, the only place near the office where we could drink and talk shit without being overheard. I kept on thinking that if he were around, he’d act too good for Margaritaville, and then come to get black-out drunk anyway.</td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr class="blank_row">
        <td colspan="3"></td>
      </tr>
      <tr>
        <td></td>
        <td>Carter was a different person to each of us — to me, Carter was a permanent fixture out of the corner of my eye. He was always there, until he wasn’t. It felt like a betrayal when someone else was eventually hired, and moved into his desk.</td>
      </tr>
    </table>
  </main>

  <script>
    // Grab elements AFTER they exist in the DOM
    const aboutOverlay = document.getElementById("aboutOverlay");
    const aboutInner = document.getElementById("aboutInner");
    const closeBtn = document.querySelector('.closeBtn');

    // Attach handler to ALL .openAbout links (works if there are many)
    document.querySelectorAll('.openAbout').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        openAbout();
      });
    });

    function openAbout() {
      // lock scrolling on background
      document.body.style.overflow = 'hidden';
      aboutOverlay.classList.add("show");
      aboutOverlay.setAttribute('aria-hidden', 'false');

      // Only fetch once; aboutInner.dataset.loaded used as cache flag
      if (!aboutInner.dataset.loaded) {
        // NOTE: when testing locally, run a local server so fetch() can succeed.
        fetch("about.html")
          .then(res => {
            if (!res.ok) throw new Error('Network response not ok');
            return res.text();
          })
          .then(html => {
            aboutInner.innerHTML = html;
            aboutInner.dataset.loaded = "true";
          })
          .catch(err => {
            console.error('Error loading about.html:', err);
            aboutInner.innerHTML = "<p>Error loading About page.</p>";
          });
      }
    }

    function closeAbout() {
      aboutOverlay.classList.remove("show");
      aboutOverlay.setAttribute('aria-hidden', 'true');
      // restore scroll
      document.body.style.overflow = '';
    }

    // Close handlers
    closeBtn.addEventListener('click', closeAbout);
    aboutOverlay.addEventListener('click', (e) => {
      if (e.target === aboutOverlay) closeAbout();
    });

    // keyboard: Escape to close
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && aboutOverlay.classList.contains('show')) {
        closeAbout();
      }
    });
  </script>
</body>
</html>
